---
import type PromisePool from '@supercharge/promise-pool';
import {SHEET_API_KEY, SHEET_ID} from '../server-constants'

// APIからSocialsデータを取得するところ。ピポピポ。
const { Sheet } = Astro.props;
const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${Sheet}/?key=${SHEET_API_KEY}`);
const data = await response.json();
const sheetData = data.values;
---

<div class="flex flex-wrap mt-4">
{
    sheetData.map((item, index) => ( 
      <a href={item[2]} target="_blank" aria-label={item[3]} class="bg-button p-4 md:m-2 m-1 rounded-xl border-black
      border border-b-4 border-r-4 active:border-t-4 active:border-l-4 active:border-b active:border-r
      font-medium leading-normal flex flex-intial space-x-2 text-2xl align-bottom
      ">
      <svg
        xmlns="http://www.w3.org/00/svg"
        class="h-6 w-6 md:h-10 md:w-10 fill-tertialy"
        fill="white"
        viewBox="0 0 24 24">
        <path d={item[1]} />
      </svg>
      </a>
    ))
}
</div>
